<div class="preview-container">
    <div class="invoice-container">
        <div class="invoice-head">
            <div class="invoice-recipient">
                <div class="form-group">
                    <label translate="invoices">Receiver</label>
                    <div class="form-control" readonly>{{ sender.name }}</div>
                </div>
                <div class="form-group">
                    <label translate="invoices">BULSTAT</label>
                    <div class="form-control" readonly>{{ sender.bulstat }}</div>
                </div>
                <div class="form-group">
                    <label translate="invoices">VAT</label>
                    <div class="form-control" readonly>{{ sender.vat }}</div>
                </div>
                <div class="form-group">
                    <label translate="invoices">Address</label>
                    <div class="form-control" readonly>{{ sender.address }}</div>
                </div>
            </div>
            <div class="invoice-heading">
                <h1 class="text-center" translate="invoices">Invoice</h1>
                <div class="form-group">
                    <label class="text-center" translate="invoices">Number</label>
                    <div class="text-center">{{ invoice.number }}</div>
                </div>
                <div class="form-group">
                    <label class="text-center" translate="invoices">Issue date</label>
                    <div class="text-center">{{ invoice.issue_date|date:'d' }} {{ (invoice.issue_date|date:'MMM')|translate }} {{ invoice.issue_date|date:'y' }}</div>
                </div>
                <div class="form-group">
                    <label class="text-center" translate="invoices">Creation date</label>
                    <div class="form-control text-center">{{ invoice.creation_date|date:'d' }} {{ (invoice.creation_date|date:'MMM')|translate }} {{ invoice.creation_date|date:'y' }}</div>
                </div>
                <!-- <div class="form-group">
                    <label class="text-center" translate="invoices">System ID:</label>
                    <div class="form-control text-center">{{ invoice.id }}</div>
                </div> -->
            </div>
            <div class="invoice-issuer">
                <div class="form-group">
                    <label translate="invoices">Provider</label>
                    <p>{{ invoice.provider.organization }}</p>
                </div>
                <div class="form-group">
                    <label translate="invoices">VAT</label>
                    <p>{{ invoice.provider?.vat || '---'}}</p>
                </div>
                <div class="form-group">
                    <label translate="invoices">Address</label>
                    <p>{{ invoice.provider?.address || '---'}}</p>
                </div>
                <div class="form-group">
                    <label translate="invoices">Accountable person</label>
                    <p>{{ invoice.provider?.acc_person || '---'}}</p>
                </div>
            </div>
        </div>
        <div class="invoice-goods-container">
            <div class="invoice-goods-heading" *ngIf="invoice.unit_prices_with_vat">
                {{ 'Unit prices are with VAT'|translate:'invoices' }}
            </div>
            <table>
                <thead>
                    <tr>
                        <th style="width: 30px" translate="invoices">#</th>
                        <th translate="invoices">Name of goods/service</th>
                        <th style="width: 10%" translate="invoices">Measure</th>
                        <th style="width: 10%" translate="invoices">Qty.</th>
                        <th style="width: 10%" translate="invoices">Unit price</th>
                        <th style="width: 5%" translate="invoices">VAT (%)</th>
                        <th style="width: 10%" translate="invoices">Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let row of invoice.goods; let idx = index">
                        <td>{{ idx + 1 }}</td>
                        <td>
                            {{ row.title }}
                        </td>
                        <td>
                            <div class="text-right">
                                {{ row.measure }}
                            </div>
                        </td>
                        <td>
                            <div class="text-right">
                                {{ row.quantity }}
                            </div>
                        </td>
                        <td>
                            <div class="text-right">
                                {{ row.price }}
                            </div>
                        </td>
                        <td>
                            20%
                        </td>
                        <td class="text-right">
                            {{ invoice.goods[idx].quantity * invoice.goods[idx].price }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="invoice-sum-container">
            <div class="invoice-notes-container">
                <label translate="invoices">Notes:</label>
                <div class="invoice-notes">{{ invoice.notes }}</div>
            </div>
            <div class="sum-container">
                <div class="cell" translate="invoices">Tax base (20%)</div>
                <div class="cell text-right">{{ invoice.total_sum }} {{ currency_sign }}</div>
                <div class="cell" translate="invoices">VAT charged</div>
                <div class="cell text-right">{{ invoice.total_vat }} {{ currency_sign }}</div>
                <div class="cell">
                    <strong translate="invoices">Payment amount</strong>
                </div>
                <div class="cell text-right">{{ invoice.payment_amount }} {{ currency_sign }}</div>
            </div>
        </div>
    </div>
    <div class="invoice-actions-container" *ngIf="!invoice.status">
        <button class="btn btn-danger" (click)="removeInvoice()" translate="invoices">Remove invoice</button>
    </div>
</div>
