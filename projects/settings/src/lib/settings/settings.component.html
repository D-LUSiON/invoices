<form [formGroup]="settingsForm" class="settings-container">
    <div class="settings-sidebar">
        <div
            class="settings-sidebar-row"
            *ngFor="let key of settings_keys"
            [class.active]="active_setting === key"
            (click)="activateSetting(key)"
        >
            <div class="setting-row-title">{{ key|translate:'settings' }}</div>
            <div class="setting-row-icon activated">
                <span class="mdl2-ChevronRight"></span>
            </div>
        </div>
    </div>
    <div class="settings-main-container">
        <div class="setting-container" [class.active]="active_setting === 'general'" formGroupName="general">
            <div class="form-group">
                <label translate="settings">Interface language</label>
                <select class="form-control" formControlName="language">
                    <option *ngFor="let lang of languages" [value]="lang">{{ lang }}</option>
                </select>
            </div>
            <div class="form-group">
                <label translate="settings">Currency sign</label>
                <input type="text" class="form-control" formControlName="currency_sign">
            </div>
            <div class="form-group">
                <label translate="settings">Backups path</label>
                <div class="form-control-container cur-pointer" (click)="chooseFolder()">
                    <div class="form-control">{{ settingsForm.value['general']['backup_path'] }}</div>
                    <div class="form-control-icon">
                        <span class="mdl2 mdl2-Folder"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="setting-container" [class.active]="active_setting === 'sender'" formGroupName="sender">
            <div class="form-group">
                <label translate="settings">Name</label>
                <input type="text" class="form-control" formControlName="name">
            </div>
            <div class="form-group">
                <label translate="settings">BULSTAT</label>
                <input type="text" class="form-control" formControlName="bulstat">
            </div>
            <div class="form-group">
                <label translate="settings">VAT</label>
                <input type="text" class="form-control" formControlName="vat">
            </div>
            <div class="form-group">
                <label translate="settings">Addess</label>
                <input type="text" class="form-control" formControlName="address">
            </div>
            <div class="form-group">
                <label translate="settings">Email</label>
                <input type="text" class="form-control" formControlName="email">
            </div>
            <div class="form-group">
                <label translate="settings">Password</label>
                <input type="password" class="form-control" formControlName="password">
            </div>
        </div>
        <div class="setting-container" [class.active]="active_setting === 'accountant'" formGroupName="accountant">
            <div class="form-group">
                <label translate="settings">Your accountant's email</label>
                <input type="text" class="form-control" formControlName="email">
            </div>
            <div class="form-group">
                <label translate="settings" translate="settings">Invoice fields to be included in the Excel file:</label>
                <ng-container *ngIf="settings?.accountant?.invoice_fields?.length">
                    <label *ngFor="let field of settings.accountant.invoice_fields; let idx = index">
                        <input
                            #checkbox
                            type="checkbox"
                            [checked]="field.checked"
                            [name]="field.name"
                            (change)="toggleField(idx, checkbox.checked)"
                        > {{ field.title|translate:'settings' }}
                    </label>
                </ng-container>
            </div>
        </div>
    </div>
</form>
